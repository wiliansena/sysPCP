{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>Ficha Técnica do Solado</h2>

    <div class="form-group">
        <label><b>Referência:</b></label>
        <input type="text" class="form-control" value="{{ solado.referencia }}" readonly>
    </div>

    <div class="form-group">
        <label><b>Descrição:</b></label>
        <input type="text" class="form-control" value="{{ solado.descricao }}" readonly>
    </div>

    <div class="form-group">
        <label><b>Imagem do Solado:</b></label><br>
        {% if solado.imagem %}
        <img src="{{ url_for('static', filename='uploads/' + solado.imagem) }}" alt="Imagem do Solado" class="img-fluid"
            style="max-width: 200px;">
        {% else %}
        <p>Nenhuma imagem disponível</p>
        {% endif %}
    </div>

    <h4>Ficha Técnica</h4>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Tamanhos</th>
                {% for tamanho in solado.tamanhos %}
                <th>{{ tamanho.nome }}</th>
                {% endfor %}
                <th><b>TOTAIS</b></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><b>GRADE</b></td>
                {% for tamanho in solado.tamanhos %}
                <td>{{ tamanho.quantidade }}</td>
                {% endfor %}
                <td><b>{{ total_grade }}</b></td>
            </tr>
            <tr>
                <td><b>PESO MÉDIO</b></td>
                {% for tamanho in solado.tamanhos %}
                <td>{{ "%.3f"|format(tamanho.peso_medio) }}</td>
                {% endfor %}
                <td><b>{{ "%.3f"|format(peso_medio_total) }}</b></td>
            </tr>
            <tr>
                <td><b>PESO MÉDIO FRISO</b></td>
                {% for tamanho in solado.tamanhos %}
                <td>{{ "%.3f"|format(tamanho.peso_friso) }}</td>
                {% endfor %}
                <td><b>{{ "%.3f"|format(peso_friso_total) }}</b></td>
            </tr>
            <tr>
                <td><b>PESO MÉDIO SEM FRISO</b></td>
                {% for tamanho in solado.tamanhos %}
                <td>{{ "%.3f"|format(tamanho.peso_sem_friso) }}</td>
                {% endfor %}
                <td><b>{{ "%.3f"|format(peso_sem_friso_total) }}</b></td>
            </tr>
        </tbody>
    </table>
    
    <h4>Formulação do Solado</h4>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Código</th>
                <th>Descrição</th>
                <th>Carga (Kg)</th>
                <th>Porcentagem (%)</th>
                <th>Pares por Carga</th>
                <th>Consumo</th>
                <th>Preço Unitário</th>
            </tr>
        </thead>
        <tbody>
            {% for item in solado.formulacao %}
            <tr>
                <td>{{ item.componente.id }}</td>
                <td>{{ item.componente.descricao }}</td>
                <td>{{ "%.2f"|format(item.carga) }}</td>
                <td>{{ "%.2f"|format(item.porcentagem) }}%</td>
                <td>{{ "%.2f"|format(pares_por_carga) }}</td>
                <td>{{ "%.6f"|format(item.consumo) }}</td>
                <td>R$ {{ "%.2f"|format(item.preco_unitario) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <h4>Custo total: R$ {{ "%.2f"|format(preco_total) }}</h4>
    <button class="btn btn-primary" onclick="window.print()">
        <i class="fa fa-print"></i> Imprimir
    </button>
    <a href="{{ url_for('routes.listar_solados') }}" class="btn btn-secondary">Sair</a>    

</div>
{% endblock %}